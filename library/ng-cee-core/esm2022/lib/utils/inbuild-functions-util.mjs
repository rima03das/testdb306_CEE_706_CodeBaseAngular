import { Injectable } from "@angular/core";
import { CommonUtil } from "./common-util";
import moment from "moment";
import * as i0 from "@angular/core";
export class InBuildFunctionsUtil {
    commonUtil;
    constructor() {
        this.commonUtil = new CommonUtil();
    }
    /* Validate for dd/mm/yyyy format */
    ValidateAge(cnf) {
        let result = false;
        if (cnf && cnf.targets && cnf.targets.length === 1 && cnf.variables && Object.keys(cnf.variables).length === 1) {
            const targetAge = cnf.targets[0];
            for (const field_id in cnf.variables) {
                let currentDate = new Date();
                const inputDate = this.commonUtil.adjustTZ(new Date(cnf.variables[field_id]));
                const targetDate = new Date(currentDate.setFullYear(currentDate.getFullYear() - targetAge));
                if (inputDate.getTime() <= targetDate.getTime()) {
                    result = true;
                }
            }
        }
        return result;
    }
    /* Validate for mm/dd/yyyy format */
    ValidateAgeFormat(cnf) {
        // console.log(cnf);        
        let result = false;
        if (cnf && cnf.targets && cnf.targets.length === 1 && cnf.variables && Object.keys(cnf.variables).length === 1) {
            const targetAge = cnf.targets[0];
            for (const field_id in cnf.variables) {
                let currentDate = new Date();
                let setFormat = this.interchangeDateFormat(cnf.variables[field_id]);
                const inputDate = this.commonUtil.adjustTZ(new Date(setFormat));
                const targetDate = new Date(currentDate.setFullYear(currentDate.getFullYear() - targetAge));
                if (inputDate.getTime() <= targetDate.getTime()) {
                    result = true;
                }
            }
        }
        return result;
    }
    interchangeDateFormat(dateString) {
        // let [day, month, year] = dateString.split('/');
        // let newDateString = `${month}/${day}/${year}`;
        // return newDateString;
        return moment(dateString, 'DD/MM/YYYY').format('MM/DD/YYYY');
    }
    ScrolledToBottom(cnf) {
        return new Promise(function (myResolve) {
            if (cnf && cnf.targets && cnf.targets.length === 1) {
                const targetQuery = cnf.targets[0];
                setTimeout(() => {
                    const targetElement = document.querySelector(targetQuery);
                    if (targetElement) {
                        if (targetElement.scrollHeight <= targetElement.offsetHeight) {
                            myResolve(true);
                        }
                        else {
                            targetElement.addEventListener("scroll", (e) => {
                                if (e.target.offsetHeight + e.target.scrollTop >= e.target.scrollHeight - 10) {
                                    myResolve(true);
                                }
                            });
                        }
                    }
                    else {
                        myResolve(false);
                    }
                }, 0);
            }
            else {
                myResolve(false);
            }
        });
    }
    static ɵfac = function InBuildFunctionsUtil_Factory(t) { return new (t || InBuildFunctionsUtil)(); };
    static ɵprov = /*@__PURE__*/ i0.ɵɵdefineInjectable({ token: InBuildFunctionsUtil, factory: InBuildFunctionsUtil.ɵfac, providedIn: 'any' });
}
(() => { (typeof ngDevMode === "undefined" || ngDevMode) && i0.ɵsetClassMetadata(InBuildFunctionsUtil, [{
        type: Injectable,
        args: [{
                providedIn: 'any',
            }]
    }], () => [], null); })();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5idWlsZC1mdW5jdGlvbnMtdXRpbC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uLy4uL0FuZ3VsYXItMTcvRVNGLUFuZ3VsYXItV0ZFLUxpYnJhcnkvcHJvamVjdHMvbmctY2VlLWNvcmUvc3JjL2xpYi91dGlscy9pbmJ1aWxkLWZ1bmN0aW9ucy11dGlsLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxVQUFVLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFDM0MsT0FBTyxFQUFFLFVBQVUsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUMzQyxPQUFPLE1BQU0sTUFBTSxRQUFRLENBQUM7O0FBSzVCLE1BQU0sT0FBTyxvQkFBb0I7SUFDN0IsVUFBVSxDQUFhO0lBQ3ZCO1FBQ0ksSUFBSSxDQUFDLFVBQVUsR0FBRyxJQUFJLFVBQVUsRUFBRSxDQUFDO0lBQ3ZDLENBQUM7SUFFRCxvQ0FBb0M7SUFDcEMsV0FBVyxDQUFDLEdBQUc7UUFDWCxJQUFJLE1BQU0sR0FBRyxLQUFLLENBQUM7UUFDbkIsSUFBSSxHQUFHLElBQUksR0FBRyxDQUFDLE9BQU8sSUFBSSxHQUFHLENBQUMsT0FBTyxDQUFDLE1BQU0sS0FBSyxDQUFDLElBQUksR0FBRyxDQUFDLFNBQVMsSUFBSSxNQUFNLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxTQUFTLENBQUMsQ0FBQyxNQUFNLEtBQUssQ0FBQyxFQUFFO1lBQzVHLE1BQU0sU0FBUyxHQUFHLEdBQUcsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDakMsS0FBSyxNQUFNLFFBQVEsSUFBSSxHQUFHLENBQUMsU0FBUyxFQUFFO2dCQUNsQyxJQUFJLFdBQVcsR0FBRyxJQUFJLElBQUksRUFBRSxDQUFDO2dCQUM3QixNQUFNLFNBQVMsR0FBRyxJQUFJLENBQUMsVUFBVSxDQUFDLFFBQVEsQ0FBQyxJQUFJLElBQUksQ0FBQyxHQUFHLENBQUMsU0FBUyxDQUFDLFFBQVEsQ0FB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Q25COzRCQUNMLENBQUMsQ0FBQyxDQUFDO3lCQUNOO3FCQUNKO3lCQUFNO3dCQUNILFNBQVMsQ0FBQyxLQUFLLENBQUMsQ0FBQztxQkFDcEI7Z0JBQ0wsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO2FBQ1Q7aUJBQU07Z0JBQ0gsU0FBUyxDQUFDLEtBQUssQ0FBQyxDQUFDO2FBQ3BCO1FBQ0wsQ0FBQyxDQUFDLENBQUM7SUFDUCxDQUFDOzhFQXpFUSxvQkFBb0I7Z0VBQXBCLG9CQUFvQixXQUFwQixvQkFBb0IsbUJBRmpCLEtBQUs7O2lGQUVSLG9CQUFvQjtjQUhoQyxVQUFVO2VBQUM7Z0JBQ1IsVUFBVSxFQUFFLEtBQUs7YUFDcEIiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBJbmplY3RhYmxlIH0gZnJvbSBcIkBhbmd1bGFyL2NvcmVcIjtcclxuaW1wb3J0IHsgQ29tbW9uVXRpbCB9IGZyb20gXCIuL2NvbW1vbi11dGlsXCI7XHJcbmltcG9ydCBtb21lbnQgZnJvbSBcIm1vbWVudFwiO1xyXG5cclxuQEluamVjdGFibGUoe1xyXG4gICAgcHJvdmlkZWRJbjogJ2FueScsXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBJbkJ1aWxkRnVuY3Rpb25zVXRpbCB7XHJcbiAgICBjb21tb25VdGlsOiBDb21tb25VdGlsO1xyXG4gICAgY29uc3RydWN0b3IoKSB7ICAgICAgICAgXHJcbiAgICAgICAgdGhpcy5jb21tb25VdGlsID0gbmV3IENvbW1vblV0aWwoKTtcclxuICAgIH1cclxuXHJcbiAgICAvKiBWYWxpZGF0ZSBmb3IgZGQvbW0veXl5eSBmb3JtYXQgKi9cclxuICAgIFZhbGlkYXRlQWdlKGNuZikge1xyXG4gICAgICAgIGxldCByZXN1bHQgPSBmYWxzZTsgICBcclxuICAgICAgICBpZiAoY25mICYmIGNuZi50YXJnZXRzICYmIGNuZi50YXJnZXRzLmxlbmd0aCA9PT0gMSAmJiBjbmYudmFyaWFibGVzICYmIE9iamVjdC5rZXlzKGNuZi52YXJpYWJsZXMpLmxlbmd0aCA9PT0gMSkge1xyXG4gICAgICAgICAgICBjb25zdCB0YXJnZXRBZ2UgPSBjbmYudGFyZ2V0c1swXTtcclxuICAgICAgICAgICAgZm9yIChjb25zdCBmaWVsZF9pZCBpbiBjbmYudmFyaWFibGVzKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgY3VycmVudERhdGUgPSBuZXcgRGF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaW5wdXREYXRlID0gdGhpcy5jb21tb25VdGlsLmFkanVzdFRaKG5ldyBEYXRlKGNuZi52YXJpYWJsZXNbZmllbGRfaWRdKSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB0YXJnZXREYXRlID0gbmV3IERhdGUoY3VycmVudERhdGUuc2V0RnVsbFllYXIoY3VycmVudERhdGUuZ2V0RnVsbFllYXIoKSAtIHRhcmdldEFnZSkpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGlucHV0RGF0ZS5nZXRUaW1lKCkgPD0gdGFyZ2V0RGF0ZS5nZXRUaW1lKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9XHJcblxyXG4gICAgLyogVmFsaWRhdGUgZm9yIG1tL2RkL3l5eXkgZm9ybWF0ICovXHJcbiAgICBWYWxpZGF0ZUFnZUZvcm1hdChjbmYpIHtcclxuICAgICAgICAvLyBjb25zb2xlLmxvZyhjbmYpOyAgICAgICAgXHJcbiAgICAgICAgbGV0IHJlc3VsdCA9IGZhbHNlOyAgIFxyXG4gICAgICAgIGlmIChjbmYgJiYgY25mLnRhcmdldHMgJiYgY25mLnRhcmdldHMubGVuZ3RoID09PSAxICYmIGNuZi52YXJpYWJsZXMgJiYgT2JqZWN0LmtleXMoY25mLnZhcmlhYmxlcykubGVuZ3RoID09PSAxKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHRhcmdldEFnZSA9IGNuZi50YXJnZXRzWzBdO1xyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGZpZWxkX2lkIGluIGNuZi52YXJpYWJsZXMpIHtcclxuICAgICAgICAgICAgICAgIGxldCBjdXJyZW50RGF0ZSA9IG5ldyBEYXRlKCk7ICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgbGV0IHNldEZvcm1hdCA9IHRoaXMuaW50ZXJjaGFuZ2VEYXRlRm9ybWF0KGNuZi52YXJpYWJsZXNbZmllbGRfaWRdKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGlucHV0RGF0ZSA9IHRoaXMuY29tbW9uVXRpbC5hZGp1c3RUWihuZXcgRGF0ZShzZXRGb3JtYXQpKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHRhcmdldERhdGUgPSBuZXcgRGF0ZShjdXJyZW50RGF0ZS5zZXRGdWxsWWVhcihjdXJyZW50RGF0ZS5nZXRGdWxsWWVhcigpIC0gdGFyZ2V0QWdlKSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoaW5wdXREYXRlLmdldFRpbWUoKSA8PSB0YXJnZXREYXRlLmdldFRpbWUoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH1cclxuXHJcbiAgICBpbnRlcmNoYW5nZURhdGVGb3JtYXQoZGF0ZVN0cmluZykge1xyXG4gICAgICAgIC8vIGxldCBbZGF5LCBtb250aCwgeWVhcl0gPSBkYXRlU3RyaW5nLnNwbGl0KCcvJyk7XHJcbiAgICAgICAgLy8gbGV0IG5ld0RhdGVTdHJpbmcgPSBgJHttb250aH0vJHtkYXl9LyR7eWVhcn1gO1xyXG4gICAgICAgIC8vIHJldHVybiBuZXdEYXRlU3RyaW5nO1xyXG4gICAgICAgIHJldHVybiBtb21lbnQoZGF0ZVN0cmluZywnREQvTU0vWVlZWScpLmZvcm1hdCgnTU0vREQvWVlZWScpO1xyXG4gICAgfVxyXG5cclxuICAgIFNjcm9sbGVkVG9Cb3R0b20oY25mKTogUHJvbWlzZTxib29sZWFuPiB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKG15UmVzb2x2ZSkgeyAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBpZiAoY25mICYmIGNuZi50YXJnZXRzICYmIGNuZi50YXJnZXRzLmxlbmd0aCA9PT0gMSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdGFyZ2V0UXVlcnkgPSBjbmYudGFyZ2V0c1swXTtcclxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRhcmdldEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRhcmdldFF1ZXJ5KTsgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0YXJnZXRFbGVtZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0YXJnZXRFbGVtZW50LnNjcm9sbEhlaWdodCA8PSB0YXJnZXRFbGVtZW50Lm9mZnNldEhlaWdodCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbXlSZXNvbHZlKHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwic2Nyb2xsXCIsIChlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUudGFyZ2V0Lm9mZnNldEhlaWdodCArIGUudGFyZ2V0LnNjcm9sbFRvcCA+PSBlLnRhcmdldC5zY3JvbGxIZWlnaHQgLSAxMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBteVJlc29sdmUodHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBteVJlc29sdmUoZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0sIDApO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgbXlSZXNvbHZlKGZhbHNlKTsgXHJcbiAgICAgICAgICAgIH0gXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG59Il19