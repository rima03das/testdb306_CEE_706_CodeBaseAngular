export class RepeatableworkflowHandler {
    initConfig(workflowId, currentIndex, repeatLength, parentWorkflowId) {
        this.updateConfig(workflowId, currentIndex, repeatLength, parentWorkflowId);
    }
    /**
     * to update the configuration
     * param workflowId
     * param currentIndex
     * param repeatLength
     * param parentWorkflowId
     * **/
    updateConfig(workflowId, currentIndex = 0, repeatLength = null, parentWorkflowId = null) {
        let repeatWorkflowMasterData = {};
        const config = this.getAllConfig();
        if (config) {
            repeatWorkflowMasterData = config;
        }
        if (!repeatWorkflowMasterData[workflowId]) {
            repeatWorkflowMasterData[workflowId] = {};
        }
        repeatWorkflowMasterData[workflowId]['count'] = currentIndex;
        if (repeatLength) {
            repeatWorkflowMasterData[workflowId]['length'] = repeatLength;
        }
        if (parentWorkflowId) {
            repeatWorkflowMasterData[workflowId]['parentworkFlow'] = parentWorkflowId;
        }
        window.localStorage.setItem('REPEAT_WORKFLOW_CONFIG', JSON.stringify(repeatWorkflowMasterData));
    }
    getAllConfig() {
        let config = window.localStorage.getItem('REPEAT_WORKFLOW_CONFIG');
        if (config) {
            config = JSON.parse(config);
            return config;
        }
        return null;
    }
    getConfigByWorkflowId(workflowId) {
        const config = this.getAllConfig();
        return ((config && config[workflowId])) ? config[workflowId] : null;
    }
    incriseConfigCount(workflowId) {
        const config = this.getAllConfig();
        if (config && config[workflowId]) {
            let count = config[workflowId]['count'];
            count += 1;
            this.updateConfig(workflowId, count);
        }
        return;
    }
    removeWorkflowFromConfig(workflowId) {
        const config = this.getAllConfig();
        if (config && config[workflowId]) {
            delete config[workflowId];
            window.localStorage.setItem('REPEAT_WORKFLOW_CONFIG', JSON.stringify(config));
        }
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicmVwZWF0YWJsZXdvcmtmbG93LXV0aWwuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi8uLi9Bbmd1bGFyLTE3L0VTRi1Bbmd1bGFyLVdGRS1MaWJyYXJ5L3Byb2plY3RzL25nLWNlZS1jb3JlL3NyYy9saWIvdXRpbHMvcmVwZWF0YWJsZXdvcmtmbG93LXV0aWwudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsTUFBTSxPQUFPLHlCQUF5QjtJQUVwQyxVQUFVLENBQUMsVUFBVSxFQUFFLFlBQVksRUFBRSxZQUFZLEVBQUcsZ0JBQWdCO1FBQ2xFLElBQUksQ0FBQyxZQUFZLENBQUMsVUFBVSxFQUFFLFlBQVksRUFBRSxZQUFZLEVBQUcsZ0JBQWdCLENBQUMsQ0FBQztJQUMvRSxDQUFDO0lBQ0g7Ozs7OztVQU1NO0lBQ0osWUFBWSxDQUFDLFVBQVUsRUFBQyxZQUFZLEdBQUcsQ0FBQyxFQUFFLFlBQVksR0FBRyxJQUFJLEVBQUUsZ0JBQWdCLEdBQUcsSUFBSTtRQUNwRixJQUFJLHdCQUF3QixHQUFRLEVBQUUsQ0FBQztRQUN2QyxNQUFNLE1BQU0sR0FBRyxJQUFJLENBQUMsWUFBWSxFQUFFLENBQUM7UUFDbkMsSUFBSSxNQUFNLEVBQUU7WUFDVix3QkFBd0IsR0FBRyxNQUFNLENBQUM7U0FDbkM7UUFDRCxJQUFJLENBQUMsd0JBQXdCLENBQUMsVUFBVSxDQUFDLEVBQUU7WUFDekMsd0JBQXdCLENBQUMsVUFBVSxDQUFDLEdBQUcsRUFBRSxDQUFDO1NBQzNDO1FBQ0Qsd0JBQXdCLENBQUMsVUFBVSxDQUFDLENBQUMsT0FBTyxDQUFDLEdBQUcsWUFBWSxDQUFDO1FBQzdELElBQUksWUFBWSxFQUFFO1lBQ2hCLHdCQUF3QixDQUFDLFVBQVUsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxHQUFHLFlBQVksQ0FBQztTQUMvRDtRQUNELElBQUksZ0JBQWdCLEVBQUU7WUFDcEIsd0JBQXdCLENBQUMsVUFBVSxDQUFDLENBQUMsZ0JBQWdCLENBQUMsR0FBRyxnQkFBZ0IsQ0FBQztTQUMzRTtRQUNELE1BQU0sQ0FBQyxZQUFZLENBQUMsT0FBTyxDQUFDLHdCQUF3QixFQUFFLElBQUksQ0FBQyxTQUFTLENBQUMsd0JBQXdCLENBQUMsQ0FBQyxDQUFDO0lBQ2xHLENBQUM7SUFDRCxZQUFZO1FBQ1YsSUFBSSxNQUFNLEdBQUcsTUFBTSxDQUFDLFlBQVksQ0FBQyxPQUFPLENBQUMsd0JBQXdCLENBQUMsQ0FBQztRQUNuRSxJQUFJLE1BQU0sRUFBRTtZQUNWLE1BQU0sR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxDQUFDO1lBQzVCLE9BQU8sTUFBTSxDQUFDO1NBQ2Y7UUFDRCxPQUFPLElBQUksQ0FBQztJQUNkLENBQUM7SUFFRCxxQkFBcUIsQ0FBQyxVQUFVO1FBQzlCLE1BQU0sTUFBTSxHQUFHLElBQUksQ0FBQyxZQUFZLEVBQUUsQ0FBQztRQUNuQyxPQUFPLENBQUMsQ0FBQyxNQUFNLElBQUksTUFBTSxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUM7SUFDdEUsQ0FBQztJQUdELGtCQUFrQixDQUFDLFVBQVU7UUFDM0IsTUFBTSxNQUFNLEdBQUcsSUFBSSxDQUFDLFlBQVksRUFBRSxDQUFDO1FBQ25DLElBQUksTUFBTSxJQUFJLE1BQU0sQ0FBQyxVQUFVLENBQUMsRUFBRTtZQUNqQyxJQUFJLEtBQUssR0FBRyxNQUFNLENBQUMsVUFBVSxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUc7WUFDMUMsS0FBSyxJQUFJLENBQUMsQ0FBQztZQUNYLElBQUksQ0FBQyxZQUFZLENBQUMsVUFBVSxFQUFFLEtBQUssQ0FBQyxDQUFDO1NBQ3JDO1FBQ0QsT0FBUTtJQUNWLENBQUM7SUFDRCx3QkFBd0IsQ0FBQyxVQUFVO1FBQ2pDLE1BQU0sTUFBTSxHQUFRLElBQUksQ0FBQyxZQUFZLEVBQUUsQ0FBQztRQUN4QyxJQUFJLE1BQU0sSUFBSSxNQUFNLENBQUMsVUFBVSxDQUFDLEVBQUU7WUFDaEMsT0FBTyxNQUFNLENBQUMsVUFBVSxDQUFDLENBQUM7WUFDMUIsTUFBTSxDQUFDLFlBQVksQ0FBQyxPQUFPLENBQUMsd0JBQXdCLEVBQUUsSUFBSSxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDO1NBQy9FO0lBQ0gsQ0FBQztDQUNGIiwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNsYXNzIFJlcGVhdGFibGV3b3JrZmxvd0hhbmRsZXJ7XHJcbiAgICBcclxuICBpbml0Q29uZmlnKHdvcmtmbG93SWQsIGN1cnJlbnRJbmRleCwgcmVwZWF0TGVuZ3RoICwgcGFyZW50V29ya2Zsb3dJZCApIHtcclxuICAgIHRoaXMudXBkYXRlQ29uZmlnKHdvcmtmbG93SWQsIGN1cnJlbnRJbmRleCwgcmVwZWF0TGVuZ3RoICwgcGFyZW50V29ya2Zsb3dJZCk7XHJcbiAgfVxyXG4vKipcclxuICogdG8gdXBkYXRlIHRoZSBjb25maWd1cmF0aW9uIFxyXG4gKiBwYXJhbSB3b3JrZmxvd0lkXHJcbiAqIHBhcmFtIGN1cnJlbnRJbmRleFxyXG4gKiBwYXJhbSByZXBlYXRMZW5ndGhcclxuICogcGFyYW0gcGFyZW50V29ya2Zsb3dJZFxyXG4gKiAqKi8gXHJcbiAgdXBkYXRlQ29uZmlnKHdvcmtmbG93SWQsY3VycmVudEluZGV4ID0gMCwgcmVwZWF0TGVuZ3RoID0gbnVsbCwgcGFyZW50V29ya2Zsb3dJZCA9IG51bGwpIHtcclxuICAgIGxldCByZXBlYXRXb3JrZmxvd01hc3RlckRhdGE6IGFueSA9IHt9O1xyXG4gICAgY29uc3QgY29uZmlnID0gdGhpcy5nZXRBbGxDb25maWcoKTtcclxuICAgIGlmIChjb25maWcpIHtcclxuICAgICAgcmVwZWF0V29ya2Zsb3dNYXN0ZXJEYXRhID0gY29uZmlnO1xyXG4gICAgfVxyXG4gICAgaWYgKCFyZXBlYXRXb3JrZmxvd01hc3RlckRhdGFbd29ya2Zsb3dJZF0pIHtcclxuICAgICAgcmVwZWF0V29ya2Zsb3dNYXN0ZXJEYXRhW3dvcmtmbG93SWRdID0ge307XHJcbiAgICB9XHJcbiAgICByZXBlYXRXb3JrZmxvd01hc3RlckRhdGFbd29ya2Zsb3dJZF1bJ2NvdW50J10gPSBjdXJyZW50SW5kZXg7XHJcbiAgICBpZiAocmVwZWF0TGVuZ3RoKSB7XHJcbiAgICAgIHJlcGVhdFdvcmtmbG93TWFzdGVyRGF0YVt3b3JrZmxvd0lkXVsnbGVuZ3RoJ10gPSByZXBlYXRMZW5ndGg7XHJcbiAgICB9XHJcbiAgICBpZiAocGFyZW50V29ya2Zsb3dJZCkge1xyXG4gICAgICByZXBlYXRXb3JrZmxvd01hc3RlckRhdGFbd29ya2Zsb3dJZF1bJ3BhcmVudHdvcmtGbG93J10gPSBwYXJlbnRXb3JrZmxvd0lkO1xyXG4gICAgfVxyXG4gICAgd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKCdSRVBFQVRfV09SS0ZMT1dfQ09ORklHJywgSlNPTi5zdHJpbmdpZnkocmVwZWF0V29ya2Zsb3dNYXN0ZXJEYXRhKSk7XHJcbiAgfVxyXG4gIGdldEFsbENvbmZpZygpIHtcclxuICAgIGxldCBjb25maWcgPSB3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oJ1JFUEVBVF9XT1JLRkxPV19DT05GSUcnKTtcclxuICAgIGlmIChjb25maWcpIHtcclxuICAgICAgY29uZmlnID0gSlNPTi5wYXJzZShjb25maWcpO1xyXG4gICAgICByZXR1cm4gY29uZmlnO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG51bGw7XHJcbiAgfVxyXG5cclxuICBnZXRDb25maWdCeVdvcmtmbG93SWQod29ya2Zsb3dJZCkge1xyXG4gICAgY29uc3QgY29uZmlnID0gdGhpcy5nZXRBbGxDb25maWcoKTtcclxuICAgIHJldHVybiAoKGNvbmZpZyAmJiBjb25maWdbd29ya2Zsb3dJZF0pKSA/IGNvbmZpZ1t3b3JrZmxvd0lkXSA6IG51bGw7XHJcbiAgfVxyXG5cclxuXHJcbiAgaW5jcmlzZUNvbmZpZ0NvdW50KHdvcmtmbG93SWQpIHtcclxuICAgIGNvbnN0IGNvbmZpZyA9IHRoaXMuZ2V0QWxsQ29uZmlnKCk7XHJcbiAgICBpZiAoY29uZmlnICYmIGNvbmZpZ1t3b3JrZmxvd0lkXSkge1xyXG4gICAgIGxldCBjb3VudCA9IGNvbmZpZ1t3b3JrZmxvd0lkXVsnY291bnQnXSAgO1xyXG4gICAgIGNvdW50ICs9IDE7XHJcbiAgICAgdGhpcy51cGRhdGVDb25maWcod29ya2Zsb3dJZCwgY291bnQpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIDtcclxuICB9XHJcbiAgcmVtb3ZlV29ya2Zsb3dGcm9tQ29uZmlnKHdvcmtmbG93SWQpIHtcclxuICAgIGNvbnN0IGNvbmZpZzogYW55ID0gdGhpcy5nZXRBbGxDb25maWcoKTtcclxuICAgIGlmIChjb25maWcgJiYgY29uZmlnW3dvcmtmbG93SWRdKSB7XHJcbiAgICAgIGRlbGV0ZSBjb25maWdbd29ya2Zsb3dJZF07XHJcbiAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnUkVQRUFUX1dPUktGTE9XX0NPTkZJRycsIEpTT04uc3RyaW5naWZ5KGNvbmZpZykpO1xyXG4gICAgfVxyXG4gIH1cclxufSJdfQ==